!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=57)}([function(t,e,n){var r=n(4)(Object,"create");t.exports=r},function(t,e,n){var r=n(21),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();t.exports=i},function(t,e,n){var r=n(35);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(41);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(18),o=n(27);t.exports=function(t,e){var n=o(t,e);return r(n)?n:void 0}},function(t,e,n){var r=n(1).Symbol;t.exports=r},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){var r=n(12);t.exports=function(t){return t&&t.length?r(t):[]}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},,function(t,e,n){},function(t,e,n){var r=n(13),o=n(47),i=n(52),u=n(53),a=n(54),c=n(7);t.exports=function(t,e,n){var s=-1,f=o,l=t.length,p=!0,h=[],d=h;if(n)p=!1,f=i;else if(l>=200){var v=e?null:a(t);if(v)return c(v);p=!1,f=u,d=new r}else d=e?[]:h;t:for(;++s<l;){var y=t[s],g=e?e(y):y;if(y=n||0!==y?y:0,p&&g==g){for(var b=d.length;b--;)if(d[b]===g)continue t;e&&d.push(g),h.push(y)}else f(d,g,n)||(d!==h&&d.push(g),h.push(y))}return h}},function(t,e,n){var r=n(14),o=n(45),i=n(46);function u(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}u.prototype.add=u.prototype.push=o,u.prototype.has=i,t.exports=u},function(t,e,n){var r=n(15),o=n(40),i=n(42),u=n(43),a=n(44);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=u,c.prototype.set=a,t.exports=c},function(t,e,n){var r=n(16),o=n(32),i=n(39);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},function(t,e,n){var r=n(17),o=n(28),i=n(29),u=n(30),a=n(31);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=u,c.prototype.set=a,t.exports=c},function(t,e,n){var r=n(0);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e,n){var r=n(19),o=n(24),i=n(6),u=n(26),a=/^\[object .+?Constructor\]$/,c=Function.prototype,s=Object.prototype,f=c.toString,l=s.hasOwnProperty,p=RegExp("^"+f.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||o(t))&&(r(t)?p:a).test(u(t))}},function(t,e,n){var r=n(20),o=n(6);t.exports=function(t){if(!o(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){var r=n(5),o=n(22),i=n(23),u=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":u&&u in Object(t)?o(t):i(t)}},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(9))},function(t,e,n){var r=n(5),o=Object.prototype,i=o.hasOwnProperty,u=o.toString,a=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,a),n=t[a];try{t[a]=void 0;var r=!0}catch(t){}var o=u.call(t);return r&&(e?t[a]=n:delete t[a]),o}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r,o=n(25),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(1)["__core-js_shared__"];t.exports=r},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(0),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(0),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:o.call(e,t)}},function(t,e,n){var r=n(0);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var r=n(33),o=n(34),i=n(36),u=n(37),a=n(38);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=u,c.prototype.set=a,t.exports=c},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(2),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():o.call(e,n,1),--this.size,!0)}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(2);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(2);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(2);t.exports=function(t,e){var n=this.__data__,o=r(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}},function(t,e,n){var r=n(4)(n(1),"Map");t.exports=r},function(t,e,n){var r=n(3);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(3);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(3);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(3);t.exports=function(t,e){var n=r(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this}},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(48);t.exports=function(t,e){return!!(null==t?0:t.length)&&r(t,e,0)>-1}},function(t,e,n){var r=n(49),o=n(50),i=n(51);t.exports=function(t,e,n){return e==e?i(t,e,n):r(t,o,n)}},function(t,e){t.exports=function(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}},function(t,e){t.exports=function(t){return t!=t}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}},function(t,e){t.exports=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(55),o=n(56),i=n(7),u=r&&1/i(new r([,-0]))[1]==1/0?function(t){return new r(t)}:o;t.exports=u},function(t,e,n){var r=n(4)(n(1),"Set");t.exports=r},function(t,e){t.exports=function(){}},function(t,e,n){"use strict";n.r(e);n(11);var r,o=n(8),i=n.n(o),u=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}c((r=r.apply(t,e||[])).next())}))},a=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},c=function(){function t(){}return t.prototype.getItemIds=function(t){return u(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,fetch("https://esi.evetech.net/latest/universe/ids/",{body:JSON.stringify(i()(t)),method:"POST"})];case 1:return[4,e.sent().json()];case 2:return[2,e.sent().inventory_types]}}))}))},t.prototype.getType=function(t){return u(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,fetch("https://esi.evetech.net/latest/universe/types/"+t+"/")];case 1:return[4,e.sent().json()];case 2:return[2,e.sent()]}}))}))},t}();!function(t){t[t.high=0]="high",t[t.mid=1]="mid",t[t.low=2]="low",t[t.drone=3]="drone",t[t.charge=4]="charge",t[t.rig=5]="rig"}(r||(r={}));var s=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}c((r=r.apply(t,e||[])).next())}))},f=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},l=function(){function t(){this.effectToSlot=new Map([[16,r.high],[13,r.mid],[11,r.low],[2663,r.rig]]),this.droneGroupIds=[97,100,101,299,470,544,545,549,639,640,641,1023,1159],this.chargeIds=[83,85,86,87,88,89,90,92,372,373,374,375,376,377,384,385,386,387,394,395,396,425,476,479,482,492,497,498,500,548,648,653,654,655,656,657,663,772,863,864,892,907,908,909,910,911,916,972,1010,1019,1153,1158,1400,1546,1547,1548,1549,1550,1551,1559,1569,1677,1678,1701,1702,1769,1771,1772,1773,1774,1976,1987,1989],this.esiApi=new c}return t.prototype.parse=function(t,e){return s(this,void 0,void 0,(function(){var n,o,i,u,a,c,l,p,h,d,v,y,g,b,_=this;return f(this,(function(m){switch(m.label){case 0:return n=e.trim().split(/\r?\n/),o=n[0],i=n.slice(1),u=/\[(.*)\]/.exec(o),a=null===u?"No Title":u[1],c=i.map((function(t){return t.trim()})).filter((function(t){return""!==t})).map(this.parseEftLine),[4,this.esiApi.getItemIds(c.map((function(t){return t.name})))];case 1:return l=m.sent(),[4,Promise.all(l.map((function(t){return s(_,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,this.esiApi.getType(t.id)];case 1:return[2,e.sent()]}}))}))})))];case 2:return p=m.sent(),h=c.map((function(t){return{eftLine:t,universeItem:l.find((function(e){return e.name===t.name}))}})),d=h.filter((function(t){return void 0===t.universeItem})),v=h.filter((function(t){return void 0!==t.universeItem})).map((function(t){var e=t.eftLine,n=t.universeItem;return{eftLine:e,universeType:p.find((function(t){return t.type_id===n.id}))}})),y=v.map((function(t){var e=t.eftLine,n=t.universeType;return _.parseItem(e,n)})),g={title:a,fitName:t,highSlots:y.filter((function(t){return t.slot===r.high})),midSlots:y.filter((function(t){return t.slot===r.mid})),lowSlots:y.filter((function(t){return t.slot===r.low})),drones:y.filter((function(t){return t.slot===r.drone})),charges:y.filter((function(t){return t.slot===r.charge})),rigs:y.filter((function(t){return t.slot===r.rig}))},b=d.map((function(t){return t.eftLine.name})),[2,{shipFit:g,hasErrors:b.length>0,errors:b}]}}))}))},t.prototype.parseEftLine=function(t){var e=/(.*)\s+x(\d+)$/.exec(t);return{name:null!==e?e[1]:t,amount:null!==e?Number.parseInt(e[2]):1}},t.prototype.parseItem=function(t,e){var n=this.parseSlot(e);return{name:t.amount>1?t.name+" x"+t.amount:t.name,typeId:e.type_id,slot:n}},t.prototype.parseSlot=function(t){var e=this,n=t.dogma_effects.map((function(t){return t.effect_id})).find((function(t){return e.effectToSlot.has(t)}));return void 0!==n?this.effectToSlot.get(n):this.droneGroupIds.includes(t.group_id)?r.drone:this.chargeIds.includes(t.group_id)?r.charge:void 0},t}(),p=function(){function t(){}return t.prototype.generate=function(t){return"{{ShipFitting\n| ship="+t.title+"\n| fitName="+t.fitName+"\n"+this.generateSlot("high",t.highSlots)+"\n"+this.generateSlot("mid",t.midSlots)+"\n"+this.generateSlot("low",t.lowSlots)+"\n"+this.generateSlot("drone",t.drones)+"\n"+this.generateSlot("charge",t.charges)+"\n"+this.generateSlot("rig",t.rigs)+"\n}}"},t.prototype.generateSlot=function(t,e){for(var n="",r=0;r<e.length;r++)n=n.concat("| "+t+(r+1)+"name="+e[r].name+"\n| "+t+(r+1)+"typeID="+e[r].typeId+"\n");return n},t}(),h=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}c((r=r.apply(t,e||[])).next())}))},d=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},v=new(function(){function t(){this.eftParser=new l,this.shipFitGenerator=new p}return t.prototype.show=function(){document.getElementsByTagName("body")[0].style.display="block"},t.prototype.bind=function(){var t=this;this.shipfitting=document.getElementById("shipfitting"),this.eftInput=document.getElementById("eft-input"),this.fitName=document.getElementById("fit-name"),this.errors=document.getElementById("errors"),this.parseErrors=document.getElementById("eft-parse-errors"),document.getElementById("convert").addEventListener("click",(function(){return t.convertAndCopyToClipboard()})),this.eftInput.value="[Rokh, Vanguards a]\nModal Mega Neutron Particle Accelerator I\nModal Mega Neutron Particle Accelerator I\nModal Mega Neutron Particle Accelerator I\nModal Mega Neutron Particle Accelerator I\nModal Mega Neutron Particle Accelerator I\nModal Mega Neutron Particle Accelerator I\nModal Mega Neutron Particle Accelerator I\nModal Mega Neutron Particle Accelerator I\n\nFederation Navy Stasis Webifier\nFederation Navy Stasis Webifier\nSensor Booster II\nTracking Computer II\n\nDamage Control II\nMagnetic Field Stabilizer II\nMagnetic Field Stabilizer II\nMagnetic Field Stabilizer II\nTracking Enhancer II\n\nLarge Anti-Thermal Screen Reinforcer I\nLarge Core Defense Field Extender I\nLarge Core Defense Field Extender I\n\nHobgoblin I x5\n\nScan Resolution Script\nOptimal Range Script\nCaldari Navy Antimatter Charge L"},t.prototype.convertAndCopyToClipboard=function(){return h(this,void 0,void 0,(function(){var t,e;return d(this,(function(n){switch(n.label){case 0:return[4,this.eftParser.parse(this.fitName.value,this.eftInput.value)];case 1:return(t=n.sent()).hasErrors&&(this.errors.style.display="block",this.parseErrors.innerHTML=t.errors.join("\n")),e=this.shipFitGenerator.generate(t.shipFit),this.shipfitting.innerText=e,navigator.clipboard.writeText(e),[2]}}))}))},t}());v.bind(),window.addEventListener("load",(function(){return v.show()}))}]);